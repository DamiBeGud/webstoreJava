(()=>{"use strict";!function(){let e;function t(t){e=t.target.id,console.log("id:",e)}function n(t){e=t.target.id,console.log("id:",e),fetch("http://localhost:8080/api/v1/product/"+e).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{console.log("Data:",e),document.getElementById("productName").value=e.name,document.getElementById("productPrice").value=e.price,document.getElementById("productDescription").value=e.description})).catch((e=>{console.error("Error:",e)}))}function o(){const e=document.querySelectorAll(".addStock");console.log(e),e.forEach((function(e){e.addEventListener("click",t)}));const o=document.querySelectorAll(".editProduct");console.log(o),o.forEach((function(e){e.addEventListener("click",n)}))}function d(){let e=document.querySelector("tbody"),t=document.getElementById("notFound");e&&e.remove(),t&&t.remove()}document.getElementById("updateProduct").addEventListener("click",(function(){let t=document.getElementById("productName").value,n=parseFloat(document.getElementById("productPrice").value),o=document.getElementById("productDescription").value;const d={id:parseInt(e),name:t,price:n,description:o},c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)};fetch("http://localhost:8080/api/v1/product/update",c).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{console.log("Response:",e),document.getElementById("closeEditSidebarButton").click(),document.getElementById("name-"+e.id).innerHTML="",document.getElementById("name-"+e.id).innerHTML=e.name,document.getElementById("price-"+e.id).innerHTML="",e.discount?document.getElementById("price-"+e.id).innerHTML=e.discountPrice:document.getElementById("price-"+e.id).innerHTML=e.price,document.getElementById("description"+e.id).innerHTML="",document.getElementById("description"+e.id).innerHTML=e.description})).catch((e=>{console.error("Error:",e)}))})),o(),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("addStockButton").addEventListener("click",(function(){console.log("id"+e);let t=document.getElementById("editAmount").value;const n=JSON.stringify({id:parseInt(e),stock:parseInt(t)});fetch("http://localhost:8080/api/v1/product/update/stock",{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{document.getElementById("closeAddStockSidebar").click(),console.log("Success:",e);let t=document.getElementById("stock-"+e.id);t.innerHTML="",t.innerHTML=e.stock})).catch((e=>{console.error("Error:",e)}))}))})),document.addEventListener("DOMContentLoaded",(function(){document.getElementById("searchButton").addEventListener("click",(function(){let e=document.querySelector(".inputid").getAttribute("id"),t=document.getElementById("searchInput").value,n={userId:parseInt(e),searchString:t};fetch("http://localhost:8080/api/v1/product/company/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((e=>{if(!e.ok)throw d(),document.querySelector("table").insertAdjacentHTML("afterend",'<p class="alert alert-danger" id="notFound">No products with that name were found.</p>'),new Error("Network response was not ok");return e.json()})).then((e=>{console.log("Response:",e),function(e){const{products:t,categories:n,subCategories:o}=e;d();let c=document.querySelector("table");if(console.log("pr"+t),t.length>0){let e=document.createElement("tbody");t.forEach((t=>{let d;d=t.discount?t.discountPrice:t.price;let c=document.createElement("tr");c.innerHTML=`\n                    <td>${t.id}</td>\n                    <td id="name-${t.id}">${t.name}</td>\n                    <td>$<span id="price-${t.id}">${d}</span></td>\n                    <td id="stock-${t.id}">${t.stock}</td>\n                    <td>${n[t.category-1].name}</td>\n                    <td>${o[t.subCategory-1].name}</td>\n                    <td><button class="btn btn-primary editProduct" data-toggle="collapse" data-target="#editProductCollapse" id="${t.id}">Edit</button></td>\n                    <td><button class="btn btn-secondary addStock" data-toggle="collapse" data-target="#editAmountCollapse" id="${t.id}">Add</button></td>\n                    <td><button class="btn btn-danger">Delete</button></td>`,e.appendChild(c)})),c.appendChild(e),console.log("rebuilt with new data")}}(e),o()})).catch((e=>{console.error("Error:",e)}))}))}))}()})();